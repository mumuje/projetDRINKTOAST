const socket = io();

// CrÃ©er un nouveau lobby
const createLobbyForm = document.getElementById('create-lobby-form');
createLobbyForm.addEventListener('submit', (event) => {
  event.preventDefault();
  const lobbyName = document.getElementById('lobby-name').value;
  socket.emit('createLobby', lobbyName);
});

// Rejoindre un lobby existant
const lobbyList = document.getElementById('lobby-list');
socket.on('lobbyList', (lobbies) => {
  lobbyList.innerHTML = '';
  lobbies.forEach((lobby) => {
    const listItem = document.createElement('li');
    const link = document.createElement('a');
    link.href = `jeu.html?lobby=${lobby.name}`;
    link.textContent = `${lobby.name} (${lobby.players.length} joueurs)`;
    listItem.appendChild(link);
    lobbyList.appendChild(listItem);
  });
});

socket.on('lobbyCreated', (lobby) => {
  const listItem = document.createElement('li');
  const link = document.createElement('a');
  link.href = `jeu.html?lobby=${lobby.name}`;
  link.textContent = `${lobby.name} (1 joueur)`;
  listItem.appendChild(link);
  lobbyList.appendChild(listItem);
});